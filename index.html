<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Fussy by jbilcke</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Fussy</h1>
        <p class="header">Javascript recommendation engine</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/jbilcke/node-fussy/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/jbilcke/node-fussy/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/jbilcke/node-fussy">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/jbilcke">jbilcke</a></p>


      </header>
      <section>
        <h1>
<a name="node-fussy" class="anchor" href="#node-fussy"><span class="octicon octicon-link"></span></a>node-fussy</h1>

<p><em>javascript recommendation engine</em></p>

<p>NOTE: I'm not an English native, so feel free to open issues if you see typos and bad grammar</p>

<h2>
<a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>Fussy is a recommendation engine, powered by user actions.</p>

<p>It does recommendation by binding likes and dislikes to patterns of a documents.</p>

<p>A like will reinforce the bound between two patterns (can be a word, or a sequence a word; a concept), while a dislike will weaken it.</p>

<p>The longer the patterns, the more complex the network, and accurate the results will get, but at the cost of increasing memory and cpu usage.
For now I am using patterns of length 3 by default, enough to catch basic expressions and simple concepts.</p>

<p>This network is then evaluated against a new content, to compute a matching score.
Positive memories will thus increase the score of the document, and bad memories will decrease it.</p>

<p>Since the algorith doesn't use similarity between users (this is easily computable, though),
you can do recommendations of content even with one user.</p>

<p>To simulate a "people in the same box than you also liked.." recommendation, you just have to pick the next alternatives in the sorted results.</p>

<p><a href="https://nodei.co/npm/fussy/"><img src="https://nodei.co/npm/fussy.png?downloads=true&amp;stars=true" alt="NPM"></a></p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>You can see the examples/ dir, or:</p>

<h3>
<a name="basic-demo" class="anchor" href="#basic-demo"><span class="octicon octicon-link"></span></a>Basic demo</h3>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fussy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fussy'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">samples</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement about an upcoming movie featuring pirates"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a youtube ad about hackers"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad selling cloud hosting"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement featuring video games"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad about video games"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement about an upcoming movie featuring cowboys"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a movie trailer about bearded magicians"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad selling cloud hosting"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a trailer for movie featuring cowboy sharks against aliens"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad about a new farm game"</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="c1">// var engine = new fussy.Engine("./database.json");</span>
<span class="c1">// OR</span>
<span class="kd">var</span> <span class="nx">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">Engine</span><span class="p">({</span>
  <span class="nx">stringSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
  <span class="nx">ngramSize</span><span class="o">:</span> <span class="mi">3</span>
<span class="p">});</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">samples</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">engine</span><span class="p">.</span><span class="nx">pushEvent</span><span class="p">(</span><span class="nx">samples</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// remove noise, by filtering weakest connections between concepts</span>
<span class="nx">engine</span><span class="p">.</span><span class="nx">prune</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">rateProfiles</span><span class="p">(</span><span class="s1">'an ad showing a video game about pirates'</span><span class="p">,</span> <span class="p">{</span> 
  <span class="nx">profiles</span><span class="o">:</span> <span class="p">[</span><span class="s1">'test_user_1'</span><span class="p">,</span> 
             <span class="s1">'test_user_2'</span><span class="p">]</span> 
<span class="p">});</span>

<span class="nx">engine</span><span class="p">.</span><span class="nx">rateProfiles</span><span class="p">(</span>
 <span class="s1">'an ad showing a video game about pirates'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">limit</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span>
<span class="p">);</span>
<span class="c1">// [ ["test_user_2",14], ["test_user_1",-9] ]</span>

<span class="nx">engine</span><span class="p">.</span><span class="nx">rateContents</span><span class="p">(</span><span class="s1">'test_user_1'</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'an ad about magicians'</span><span class="p">,</span>
  <span class="s1">'an ad about tablet games'</span>
<span class="p">]);</span>
<span class="c1">// [ ["an ad about magicians",0], ["an ad about tablet games",-3] ]</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">rateContents</span><span class="p">(</span><span class="s1">'test_user_2'</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'an ad about magicians'</span><span class="p">,</span>
  <span class="s1">'an ad about tablet games'</span>
<span class="p">]);</span>
<span class="c1">//  [ ["an ad about tablet games",0], ["an ad about magicians",-2] ]</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">"database.json"</span><span class="p">);</span>
</pre></div>

<h2>
<a name="remarks--features" class="anchor" href="#remarks--features"><span class="octicon octicon-link"></span></a>Remarks / features</h2>

<h3>
<a name="data-efficient" class="anchor" href="#data-efficient"><span class="octicon octicon-link"></span></a>Data-efficient</h3>

<p>Even if data is scarce, the use of weak relationship (for the moment only synonyms) improve results even when there is not a lot of data to be trained on (eg. less than 10). there will be errors, but it should still perform better than with no data at all.</p>

<h3>
<a name="self-regulating" class="anchor" href="#self-regulating"><span class="octicon octicon-link"></span></a>Self-regulating</h3>

<p>The network can change over time. New connections can be created, old ones can be reinforced or deleted. A user can choose to hate something he used to love months ago.</p>

<h3>
<a name="flexible" class="anchor" href="#flexible"><span class="octicon octicon-link"></span></a>Flexible</h3>

<p>You can put anything in the content string, eg meta-keyword to describe not only the content but also the context or environment. </p>

<p>You are not limited to -1 or +1, you can use any value. For instance if the user likes a product, that could be a +1, and if he buys it, a +5. This is up to you, you should do AB testing or other research to tweak this.
Just remember that a signal value of 0 will have no effect, because it represents the non-action (eg. the user just ignore the ad, or skip a product evaluation). If you want to force a link to be weakened (eg. automatically, after a few days or weeks) you have to use a negative value.</p>

<h2>
<a name="known-issues" class="anchor" href="#known-issues"><span class="octicon octicon-link"></span></a>Known issues</h2>

<ul>
<li><p>It would work better with a filter for the most common (and thus irrelevant) keywords. Than can be implemented using some kind of TF-IDF-like algorithm, but I've just not done it yet. This is the next thing on the TODO.</p></li>
<li><p>Injecting additional, weak connections is powerful, but using a thesaurus is still a bit limited. It would work even better with network data from DBpedia's ontology, or other semantic graph databases.</p></li>
<li><p>The memory usage can be a problem, because a lot of data is stored per-user. You will eventually need to purge the network from time to time, in order to remove the weakest/old links. That could be automatic, but it depends on how much memory you can use, so it won't be easy to implement this kind of GC.</p></li>
<li><p>The profile networks are not easily human-readable. They are made by and for the machine. But you could try to export them to visualize the graph in Gephi for instance.</p></li>
</ul><h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a name="new-fussyengine" class="anchor" href="#new-fussyengine"><span class="octicon octicon-link"></span></a>new fussy.Engine()</h3>

<p>Instanciate a new engine with default settings</p>

<h3>
<a name="new-fussyenginefile_path" class="anchor" href="#new-fussyenginefile_path"><span class="octicon octicon-link"></span></a>new fussy.Engine(file_path)</h3>

<p>Instanciate a new engine by loading a data dump file (basically a collection of profiles + the config)</p>

<h3>
<a name="new-fussyengine-ngramsize-3-" class="anchor" href="#new-fussyengine-ngramsize-3-"><span class="octicon octicon-link"></span></a>new fussy.Engine({ ngramSize: 3 }}</h3>

<p>Instanciate a new engine, with a ngramSize of 3. Values &gt; 3 go deeper into the meaning of the sentence (complex word patterns are added to the network), but dramatically increase the memory andcpu usage. "a n-gram size of 3 should be enough for most people" ™.</p>

<h3>
<a name="fussyengineratecontentsprofile_id-array_of_content_strings" class="anchor" href="#fussyengineratecontentsprofile_id-array_of_content_strings"><span class="octicon octicon-link"></span></a>fussy.Engine#rateContents(profile_id, array_of_content_strings)</h3>

<p>Evaluate the interest of one profile for a set of contents.</p>

<h3>
<a name="fussyenginerateprofilescontent--profiles-array_of_profile_ids-limit-n_top_profiles_to_keep" class="anchor" href="#fussyenginerateprofilescontent--profiles-array_of_profile_ids-limit-n_top_profiles_to_keep"><span class="octicon octicon-link"></span></a>fussy.Engine#rateProfiles(content[, { profiles: array_of_profile_ids, limit: n_top_profiles_to_keep}])</h3>

<p>Search for profiles that could be the most interested by a givent content.</p>

<h3>
<a name="fussyengineprunemin_weight-max_weight" class="anchor" href="#fussyengineprunemin_weight-max_weight"><span class="octicon octicon-link"></span></a>fussy.Engine#prune(min_weight, max_weight)</h3>

<p>Delete non-significant links (those near 0 influence)</p>

<h3>
<a name="fussyenginesavefile_path" class="anchor" href="#fussyenginesavefile_path"><span class="octicon octicon-link"></span></a>fussy.Engine#save(file_path)</h3>

<p>Dump the databse to a JSON file</p>

<h3>
<a name="fussyclearcontentstring" class="anchor" href="#fussyclearcontentstring"><span class="octicon octicon-link"></span></a>fussy.clearContent(string)</h3>

<p>The cleaning function used internally by Fussy. It remove useless spaces and line returns. Handy to clean tweets to be printed in the console, for instance.</p>

<h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Add a TF-IDF algorithm?</li>
<li>MongoDB implementation?</li>
</ul><h2>
<a name="changelog" class="anchor" href="#changelog"><span class="octicon octicon-link"></span></a>Changelog</h2>

<h4>
<a name="004" class="anchor" href="#004"><span class="octicon octicon-link"></span></a>0.0.4</h4>

<ul>
<li>Small optimization for the rateContents method</li>
</ul><h4>
<a name="003" class="anchor" href="#003"><span class="octicon octicon-link"></span></a>0.0.3</h4>

<ul>
<li>Added the rateProfiles and rateContents methods</li>
</ul><h4>
<a name="002" class="anchor" href="#002"><span class="octicon octicon-link"></span></a>0.0.2</h4>

<ul>
<li>Total rewrite. See README for more information. Yup, this file.</li>
</ul><h4>
<a name="001-wednesday-december-5-2012" class="anchor" href="#001-wednesday-december-5-2012"><span class="octicon octicon-link"></span></a>0.0.1 (Wednesday, December 5, 2012)</h4>

<ul>
<li>Added <code>database.size</code>
</li>
<li>Added <code>database.prune(threshold)</code>
</li>
<li>Added <code>database.toFile(fileName)</code>
</li>
<li>Removed the toy Twitter database from core</li>
<li>Added an example crawler you could use to build a tag database</li>
</ul><h4>
<a name="000" class="anchor" href="#000"><span class="octicon octicon-link"></span></a>0.0.0</h4>

<ul>
<li>Initial version, not very documented</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>